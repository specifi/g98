<script type="text/javascript" src="//api.filepicker.io/v2/filepicker.js"></script>

<%= form_for @post do |f| %>
  <div class="form-group">
    <label for="exampleInputEmail1">Title</label>
    <%= f.text_field :title, class: "form-control" %>
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">Description</label>
    <%= f.text_area :description, class: "form-control" %>
  </div>
  <div class="form-group">
    <label for="exampleInputEmail1">Image URL</label>
    <%= f.text_field :url, class: "form-control" %>

    <input type="filepicker" data-fp-apikey="ATz5bfnaKTTiwj5mTyBa1z"
      data-fp-button-text=" Upload Image"
      data-fp-button-class="fa fa-camera btn btn-g98"
      container="modal"
      onchange="update_url_field(event.fpfile.url)">
  </div>

  <%= f.submit "Create Post", class: "btn btn-default" %>
<% end  %>

<script type="text/javascript">
  function update_url_field(url){
    $("#post_url").val(url)
  }
</script>
